# Server_Setup

Автоматическая настройка Linux-сервера: создание пользователя, настройка SSH, безопасность, Telegram-бот и мониторинг Netdata — всё в одном скрипте.

---

## Установка

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/Igrom4ek/Server_Setup/main/unified_installer.sh)
```

Скрипт `unified_installer.sh` автоматически:
- создаёт пользователя и настраивает SSH,
- копирует публичный ключ,
- устанавливает защиту (UFW, Fail2Ban, PSAD, RKHunter, nmap),
- запускает Telegram-бота как systemd-сервис,
- разворачивает Netdata,
- проверяет установку.

---

## Структура

| Файл                          | Назначение |
|-------------------------------|------------|
| `unified_installer.sh`       | Единый автономный скрипт установки |
| `telegram_command_listener.sh` | Telegram-бот с поддержкой команды `/security` |
| `config.json`                | Конфигурация: имя пользователя, порт, службы, расписание |
| `id_ed25519.pub`             | Публичный SSH-ключ для доступа к пользователю |

---

## Защита

- `ufw` — файрвол
- `fail2ban` — защита от перебора паролей
- `psad` — обнаружение сканирования портов
- `rkhunter` — проверка на rootkits
- `nmap` — диагностика сети
- Telegram-уведомления при входах и при проверке

---

## Telegram

- Бот реагирует на команду `/security` и отправляет отчёт от `rkhunter` и `psad`
- Отправляет уведомления о входах по SSH
- Работает как systemd-сервис

---

## Мониторинг

- Используется `Netdata` в Docker-контейнере:
  http://your_server_ip:19999

---

## Проверка установки

Скрипт автоматически выполняет встроенную проверку:
- состояния служб,
- доступности портов,
- cron-задач,
- Telegram и Netdata.

---

## Требования

- Ubuntu 22.04 или совместимая
- root-доступ по SSH
- Telegram-бот и chat_id в `config.json`